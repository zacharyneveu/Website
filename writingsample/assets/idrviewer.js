/*! IDRViewer - v1.4.0 | Copyright 2017 IDRsolutions */
!function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l={LAYOUT_PRESENTATION:"presentation",LAYOUT_MAGAZINE:"magazine",LAYOUT_CONTINUOUS:"continuous",SELECT_SELECT:"select",SELECT_PAN:"pan",ZOOM_SPECIFIC:"specific",ZOOM_ACTUALSIZE:"actualsize",ZOOM_FITWIDTH:"fitwidth",ZOOM_FITHEIGHT:"fitheight",ZOOM_FITPAGE:"fitpage",ZOOM_AUTO:"auto"},m=1,n=1,o=0,p=0,q=l.ZOOM_AUTO,r=!0,s=[],t=[],u=10,v={},w="mobile",x=!1,y="",z=[];l.setup=function(m){m||(m=IDRViewer.config),x=!0,d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),e="html"!==m.pageType,f=m.bounds,o=m.pagecount,m.url&&(y=m.url),C.setup(),b=P("idrviewer");var p=document.createElement("style");p.setAttribute("type","text/css"),document.head.appendChild(p),h=p.sheet;var q=document.createElement("style");q.setAttribute("type","text/css"),document.head.appendChild(q),i=q.sheet,(n<1||n>o)&&(n=1);for(var v=0;v<o;v++)if(f[v][0]!=f[0][0]||f[v][1]!=f[0][1]){r=!1;break}switch(j){case IDRViewer.LAYOUT_CONTINUOUS:case IDRViewer.LAYOUT_PRESENTATION:break;case IDRViewer.LAYOUT_MAGAZINE:if(r)break;case w:if(d)break;default:j=IDRViewer.LAYOUT_CONTINUOUS}var z=[];if(j!=w){switch(z.push(l.LAYOUT_PRESENTATION,l.LAYOUT_CONTINUOUS),r&&z.push(l.LAYOUT_MAGAZINE),j){case IDRViewer.LAYOUT_CONTINUOUS:c=H;break;case IDRViewer.LAYOUT_MAGAZINE:c=G;break;case IDRViewer.LAYOUT_PRESENTATION:c=F}window.onresize=function(){N()};var B=document.createElement("div");for(B.style.position="relative",B.style.display="inline-block",B.style.verticalAlign="middle",B.style.minWidth="100%",B.style.lineHeight="normal",b.appendChild(B),g=document.createElement("div"),g.id="overlay",g.setAttribute("style","width: 100%; height: 100%; position: absolute; z-index: 10; visibility: hidden;"),B.appendChild(g),K.setup(),a=document.createElement("div"),a.id="contentContainer",a.style.overflow="hidden",a.style.transform="translateZ(0)",a.style.padding=u/2+"px",B.appendChild(a),v=1;v<=o;v++){var D=document.createElement("div");D.id="page"+v,D.setAttribute("style","width: "+f[v-1][0]+"px; height: "+f[v-1][1]+"px;"),D.className="page",a.appendChild(D),t[v]=D,s[v]=A(D,v)}}else z.push(w),c=I,a=document.createElement("div"),a.id="contentContainer",b.appendChild(a),b.style.lineHeight="normal";c.setup(n),Q.addClass(b,"layout-"+c.toString()),c.toString()!==w&&(N(k),c.goToPage(n),C.setPage(n,!0));var E={selectMode:K.currentSelectMode,isMobile:d,layout:c.toString(),availableLayouts:z,isFirstPage:1===n,isLastPage:c.isLastPage(n)};for(var J in m)m.hasOwnProperty(J)&&(E[J]=m[J]);E.page=n,l.fire("ready",E)};var A=function(a,b){var c={};return c.isLoaded=function(){var a=C.getState(b);return a===B.LOADED||a===B.LOADING},c.unload=function(){C.getState(b)===B.LOADED&&(C.setState(b,B.HIDDEN),a.firstChild.style.display="none")},c.load=function(){var c=C.getState(b);if(c===B.HIDDEN&&(C.setState(b,B.LOADED),a.firstChild.style.display="block"),c===B.UNLOADED)if(C.setState(b,B.LOADING),e){var d=document.createElement("object");d.setAttribute("width",""+f[b-1][0]),d.setAttribute("height",""+f[b-1][1]),d.setAttribute("data",b+".svg"),d.setAttribute("type","image/svg+xml"),d.setAttribute("class","page-inner"),a.appendChild(d),C.setState(b,B.LOADED)}else{var g=function(){var c=document.createElement("iframe");c.setAttribute("class","page-inner"),c.setAttribute("src",b+".html"),c.setAttribute("style","width: "+f[b-1][0]+"px; height: "+f[b-1][1]+"px; position: relative; border: 0;"),c.onload=function(){C.setState(b,B.LOADED)},a.appendChild(c)},h=new XMLHttpRequest;h.open("GET",y+b+".html",!0),h.onload=function(){if(h.status>=200&&h.status<400){var c=document.createElement("div");c.innerHTML=h.responseText;var d=c.querySelector("#p"+b);d.style.margin="0",d.style.overflow="hidden",d.style.position="relative";var e=function(){C.setState(b,B.LOADED),this&&this.removeEventListener("load",e)},f=d.querySelector("#pdf"+b),j=f.getAttribute("data")||f.getAttribute("src");if(j&&f.addEventListener("load",e),y){var k=f.getAttribute("data");k?f.setAttribute("data",y+k):(k=f.getAttribute("src"),k&&k.indexOf("base64")===-1&&f.setAttribute("src",y+k))}var m=d.querySelector("#fonts"+b);if(m){var n=m.innerHTML;m.parentNode.removeChild(m),n.match(/@font-face {[\s\S]*?}/g).forEach(function(a){z.indexOf(a)===-1&&(z.push(a),i.insertRule(a.replace('url("','url("'+y),i.cssRules.length))})}Q.addClass(d,"page-inner");for(var o=function(){IDRViewer.goToPage(this.dataset.page,this.dataset.zoom)},p=d.querySelectorAll("[data-action-type='GoTo']"),q=0;q<p.length;q++)p[q].onclick=o;a.appendChild(d),j||e(),l.fire("pageload",{page:b})}else g()},h.onerror=g,h.send()}},c},B={LOADING:"loading",HIDDEN:"hidden",UNLOADED:"unloaded",LOADED:"loaded"},C=function(){var a,b,d,e={},f=500,g=20,h=2,i=0,j=0,k=0,l=[];e.setup=function(){d=o;for(var a=1;a<=o;a++)l[a]=B.UNLOADED},e.getState=function(a){return l[a]},e.setState=function(a,b){m(l[a],b),l[a]=b};var m=function(a,b){switch(a){case B.LOADING:i--;break;case B.LOADED:j--;break;case B.HIDDEN:k--;break;case B.UNLOADED:d--}switch(b){case B.LOADING:i++;break;case B.LOADED:j++;break;case B.HIDDEN:k++;break;case B.UNLOADED:d++}},n=function(){if(s[a].load(),i<h)for(var c=1;c<g/2&&(p(a-c)&&(s[a-c].isLoaded()||s[a-c].load()),i!==h)&&(p(a+c)&&(s[a+c].isLoaded()||s[a+c].load()),i!==h);c++);for(var d=1,e=o;j+i>g;)a-d>e-a?(s[d].isLoaded()&&s[d].unload(),d++):(s[e].isLoaded()&&s[e].unload(),e--);b=setTimeout(n,f)},p=function(a){return a>=1&&a<=o};return e.setPage=function(d,e){c.toString()!==w&&(a=d,e&&s[d].load(),clearTimeout(b),b=setTimeout(n,f))},e.stopLoading=function(){clearTimeout(b),b=setTimeout(n,f)},e}(),D={applyTransform:function(a,b){a.style.webkitTransform=b,a.style.mozTransform=b,a.style.msTransform=b,a.style.oTransform=b,a.style.transform=b},getTransform:function(a){return"-webkit-transform: "+a+";\n-moz-transform: "+a+";\n-ms-transform: "+a+";\n-o-transform: "+a+";\ntransform: "+a+";"},applyTransformOrigin:function(a,b){a.style.webkitTransformOrigin=b,a.style.mozTransformOrigin=b,a.style.msTransformOrigin=b,a.style.oTransformOrigin=b,a.style.transformOrigin=b},applyTransitionDuration:function(a,b){a.style.webkitTransitionDuration=b,a.style.mozTransitionDuration=b,a.style.msTransitionDuration=b,a.style.oTransitionDuration=b,a.style.transitionDuration=b}},E=function(a){n!=a&&(n=a,C.setPage(a),l.fire("pagechange",{page:n,pagecount:o,isFirstPage:1===n,isLastPage:c.isLastPage(a)}))},F=function(){var c={};c.setup=function(){},c.unload=function(){for(var b=1;b<=o;b++)t[b].style.marginLeft="",t[b].style.marginTop="",Q.removeClass(t[b],"current","prev","next","before","after");a.style.width="",a.style.height=""},c.goToPage=function(a){E(a),r||N(),b.scrollTop=0,d(a),c.updateLayout()};var d=function(a){for(var b=1;b<=o;b++)Q.removeClass(t[b],"current","prev","next","before","after"),b<a?Q.addClass(t[b],"before"):b>a&&Q.addClass(t[b],"after");Q.addClass(t[a],"current"),a-1>=1&&Q.addClass(t[a-1],"prev"),a+1<=o&&Q.addClass(t[a+1],"next")};return c.updateLayout=function(){var c=Math.floor(f[n-1][0]*m),d=0,e=b.clientWidth-u;e>c?d=(e-c)/2:e=c;var g=Math.floor(f[n-1][1]*m),h=0,i=b.clientHeight-u;i>g?h=(i-g)/2:i=g,a.style.width=e+"px",a.style.height=i+"px";for(var j=1;j<=o;j++)t[j].style.marginLeft=d+"px",t[j].style.marginTop=h+"px"},c.isLastPage=function(a){return a===o},c.getZoomBounds=function(){return{width:f[n-1][0],height:f[n-1][1]}},c.getAutoZoom=function(a,b){return Math.min(a,b)},c.next=function(){l.goToPage(n+1)},c.prev=function(){l.goToPage(n-1)},c.toString=function(){return IDRViewer.LAYOUT_PRESENTATION},c}(),G=function(){function c(a){return a>1&&a<o}var d={};d.setup=function(){},d.unload=function(){for(var b=1;b<=o;b++)t[b].style.marginLeft="",t[b].style.marginTop="",Q.removeClass(t[b],"current","prev","next","before","after");a.style.width="",a.style.height=""},d.goToPage=function(a){1!==a&&a%2!==0&&(a-=1),E(a),e(a),d.updateLayout()};var e=function(a){for(var b=1;b<=o;b++)Q.removeClass(t[b],"current","prev","next","before","after");if(Q.addClass(t[a],"current"),c(a)&&Q.addClass(t[a+1],"current"),1==a&&(a=0),a+2<=o&&(Q.addClass(t[a+2],"next"),a+3<=o&&Q.addClass(t[a+3],"next")),a-1>0&&(Q.addClass(t[a-1],"prev"),a-2>0&&Q.addClass(t[a-2],"prev")),a+4<=o)for(b=a+4;b<=o;b++)Q.addClass(t[b],"after");if(a-3>0)for(b=a-3;b>0;b--)Q.addClass(t[b],"before")};return d.updateLayout=function(){var c=2*Math.floor(f[0][0]*m),d=0,e=b.clientWidth-u;e>c?d=(e-c)/2:e=c;var g=d+Math.floor(f[0][0]*m),h=Math.floor(f[0][1]*m),i=0,j=b.clientHeight-u;j>h?i=(j-h)/2:j=h,a.style.width=e+"px",a.style.height=j+"px",t[1].style.marginLeft=g+"px",t[1].style.marginTop=i+"px";for(var k=2;k<=o;k+=2)t[k].style.marginLeft=d+"px",t[k].style.marginTop=i+"px",k<o&&(t[k+1].style.marginLeft=g+"px",t[k+1].style.marginTop=i+"px")},d.isLastPage=function(a){return a+(1==a?1:2)>o},d.getZoomBounds=function(){return{width:2*f[0][0],height:f[0][1]}},d.getAutoZoom=function(a,b){return Math.min(a,b)},d.next=function(){l.goToPage(n+(1==n?1:2))},d.prev=function(){l.goToPage(n-1)},d.toString=function(){return IDRViewer.LAYOUT_MAGAZINE},d}(),H=function(){var a={},c=0,d=0;a.setup=function(){b.addEventListener("scroll",e);for(var a=0;a<o;a++)f[a][0]>c&&(c=f[a][0]),f[a][1]>d&&(d=f[a][1])},a.unload=function(){b.removeEventListener("scroll",e)};var e=function(){C.stopLoading(),g()},g=function(){var a,b;if(t[1].getBoundingClientRect().top>0)E(1);else for(a=1;a<=o;a++){var c=t[a].getBoundingClientRect();b=c.top;var d=c.bottom-c.top;if(b<=.25*d&&b>.5*-d){E(a);break}}};return a.goToPage=function(a,c){var d=0;if(c){var e=c.split(" ");switch(e[0]){case"XYZ":d=Number(e[2]);break;case"FitH":d=Number(e[1]);break;case"FitR":d=Number(e[4]);break;case"FitBH":d=Number(e[1])}0!==d&&(d=f[a-1][1]-d)}b.scrollTop=t[a].offsetTop-u/2+d*m,E(a)},a.updateLayout=function(){},a.isLastPage=function(a){return a===o},a.getZoomBounds=function(){return{width:c,height:d}},a.getAutoZoom=function(c){return a.getZoomBounds().width>b.clientWidth-u?c:1},a.next=function(){l.goToPage(n+1)},a.prev=function(){l.goToPage(n-1)},a.toString=function(){return IDRViewer.LAYOUT_CONTINUOUS},a}(),I=function(){var c,d,e,g,h,i,j,k,p,q,s,t={},u=[],v=1,x=[],y=40,z=0,A=0,B=0,C=!1;t.next=function(){this.goToPage(p?n+2:n+1,!0)},t.prev=function(){this.goToPage(n-1,!0)};var F=function(){setTimeout(function(){t.handleResize()},300)};t.setup=function(d){window.onorientationchange||(window.onorientationchange=F),window.onresize||(window.onresize=F),b.style.overflow="hidden",c=/iPhone|iPad|iPod/i.test(navigator.userAgent),a.removeAttribute("style"),a.style.overflow="visible",a.style.padding="0",a.style.margin="0",a.style.webkitBackfaceVisibility="hidden",a.style.webkitPerspective="1000",C||(b.addEventListener("touchstart",ba),b.addEventListener("touchmove",ca),b.addEventListener("touchend",da),C=!0),p=window.innerWidth>window.innerHeight,l.fire("layoutchange",{layout:w,orientation:p?"landscape":"portrait"}),(!r||f[0][0]>f[0][1])&&(p=!1);for(var e=1;e<=o;e++)u[e]=!1,x[e]={};setTimeout(function(){q=window.innerWidth,s=window.innerHeight,ia(q,s),t.goToPage(d,!1)},0)},t.handleResize=function(){if(q!==window.innerWidth||s!==window.innerHeight)if(q=window.innerWidth,s=window.innerHeight,p==q>s){ia(q,s);for(var b=1;b<=o;b++)if(u[b]&&(!p||1===b||b%2===0)){var c=document.getElementById("page"+b);c.style.marginTop=x[b].topMargin+"px",D.applyTransform(c,"translate3d("+x[b].offset+"px, 0, 0) scale("+x[b].ratio+")")}t.goToPage(n,!1)}else a.innerHTML="",m=1,t.setup(n)};var G,H,I,J,K,L,M,N,O,Q,R,S,T,U,V,W,X,Y,Z,$=!1,_=!1,aa=!1,ba=function(a){if($=!1,h=!1,1!==a.touches.length||aa||1!==m||(H=a.touches[0].clientX,J=a.touches[0].clientX,K=a.touches[0].clientY,L=J,M=K,$=!0,I=Date.now()),X&&(Y=!0),1===a.touches.length&&m>1&&(i=a.touches[0].clientX,j=a.touches[0].clientY,k=!0,N=A,O=z,Q=N,R=O,S=Date.now(),T=Date.now(),U||(U=setInterval(function(){N=Q,O=R,Q=A,R=z,T=S,S=Date.now()},200))),2===a.touches.length&&!_){h=!0,k=!1;var b=a.touches[0].clientX,c=a.touches[1].clientX,f=a.touches[0].clientY,l=a.touches[1].clientY;d=Math.sqrt(Math.pow(Math.abs(b-c),2)+Math.pow(Math.abs(f-l),2)),e=b-(b-c)/2,g=f-(f-l)/2}},ca=function(b){if(b.preventDefault(),b.stopPropagation(),1===b.touches.length&&$&&1===m){_=!0;var c=H-b.touches[0].clientX;if(0===c)return;H=b.touches[0].clientX,L=b.touches[0].clientX,M=b.touches[0].clientY,G-=c,D.applyTransform(a,"translate3d("+G+"px, 0, 0)")}else if(1===b.touches.length&&k){Z=!0;var f=b.touches[0].clientX,l=b.touches[0].clientY,o=f-i,p=l-j;A+=o,z+=p,i=f,j=l,fa(),requestAnimationFrame(function(){ga(A,z,m,!0)},P("main"))}else if(2===b.touches.length){if(aa||!b.cancelable||!h||_)return;if(B=(B+1)%2,1===B)return;var q=b.touches[0].clientX,r=b.touches[1].clientX,s=b.touches[0].clientY,t=b.touches[1].clientY,u=q-(q-r)/2,w=s-(s-t)/2;A=A+u-e,z=z+w-g,e=u,g=w;var y=Math.sqrt(Math.pow(Math.abs(q-r),2)+Math.pow(Math.abs(s-t),2)),C=y/d;m*C<v&&(C=1,m=v),m*C>4&&(C=1),m*=C;var E=u-x[n].leftMargin-A;A-=E*C-E;var F=w-x[n].topMargin-z;z-=F*C-F,fa(),requestAnimationFrame(function(){ga(A,z,m,!0)},P("main")),d=y}},da=function(a){var b,c;if(0===a.touches.length){if(_){_=!1;var d=!1;if(Date.now()-I<300&&(b=J-L,c=K-M,Math.abs(b)>100&&Math.abs(b)>.25*Math.abs(c)&&(d=!0,b>0?t.next():t.prev())),!d){var e=-window.innerWidth*(n-1);p&&(e=-window.innerWidth*Math.floor(n/2)),G>e+window.innerWidth/2?t.prev():G<e-window.innerWidth/2?t.next():t.goToPage(n,!0)}}if(clearInterval(U),U=null,Z){Z=!1;var f=Date.now()-T;b=N-A,c=O-z,V=b/(f/16),W=c/(f/16),Math.abs(V)<.5&&(V=0),Math.abs(W)<.5&&(W=0),0===V&&0===W||window.requestAnimationFrame(ea,P("main"))}}},ea=function(){X=!0,!Y&&(V<-.5||V>.5||W<-.5||W>.5)?(A-=V,z-=W,V=.95*V,W=.95*W,fa(),ga(A,z,m,!0),window.requestAnimationFrame(ea,P("main"))):(X=!1,Y=!1)},fa=function(){A>0&&(A=0,V=0),z>0&&(z=0,W=0);var a=f[n-1][0]*x[n].ratio;p&&(a*=2);var b=a*m;A<a-b&&(A=a-b,V=0);var c=f[n-1][1]*x[n].ratio,d=c*m;z<c-d&&(z=c-d,W=0)},ga=function(a,b,c,d){var e=function(a){return Math.round(2*a)/2};a=e(a),b=e(b);var f;f=d?"translate3d("+(a+x[n].offset)+"px, "+b+"px, 0) scale("+c*x[n].ratio+")":"translateX("+(a+x[n].offset)+"px) translateY("+b+"px) scale("+c*x[n].ratio+")";var g=P("page"+n);D.applyTransform(g,f)},ha=function(a){},ia=function(a,b){for(var c=1;c<=o;c++){var d=(a-20)/f[c-1][0];p&&1!=c&&(c<o||o%2===1)&&(d*=2);var e=(b-y-20)/f[c-1][1];if(d<e)x[c].ratio=d,x[c].leftMargin=10;else{x[c].ratio=e;var g=f[c-1][0]*x[c].ratio;p&&1!=c&&(c<o||o%2===1)&&(g*=2),x[c].leftMargin=(a-g)/2}x[c].topMargin=(b-y-f[c-1][1]*x[c].ratio)/2,p&&1!=c?x[c].offset=a*Math.floor(c/2)+x[c].leftMargin:x[c].offset=a*(c-1)+x[c].leftMargin}},ja=function(a){p&&1===a&&(a=0);var b=a-1,c=a+1;p&&(b-=1,c+=1,2===a&&(b=1)),b>=1&&!u[b]&&ha(b),c<=o&&!u[c]&&ha(c)};return t.goToPage=function(b,c){if(m>v)return m=v,void requestAnimationFrame(function(){ga(0,0,m,!0),t.goToPage(b,c)},P("main"));b<1&&(b=1),b>o&&(b=o),p&&1!==b&&b%2===1&&(b-=1),b!==n&&(aa=!0),u[b]||ha(b),G=p?-(window.innerWidth*Math.floor(b/2)):-(window.innerWidth*(b-1)),c&&D.applyTransitionDuration(a,"200ms"),D.applyTransform(a,"translate3d("+G+"px, 0, 0)"),p&&1!==b&&b%2===1&&(b-=1),E(b);var d=function(){var c;if(aa=!1,ja(b),D.applyTransitionDuration(a,""),a.removeEventListener("transitionend",d,!1),a.removeEventListener("webkitTransitionEnd",d,!1),p)for(var e=2;e<=o;e+=2)u[e]&&(e<n-2||e>n+2)&&(u[e]=!1,c=P("page"+e),c.parentNode.removeChild(c),e<o&&(u[e+1]=!1));else for(var f=1;f<=o;f++)u[f]&&(f<n-1||f>n+1)&&(u[f]=!1,c=P("page"+f),c.parentNode.removeChild(c))};c?(a.addEventListener("transitionend",d,!1),a.addEventListener("webkitTransitionEnd",d,!1)):d()},t.isLastPage=function(a){return p?a+2>o:a===o},t.toString=function(){return w},t}(),J=function(a){try{a.getSelection?a.getSelection().empty?a.getSelection().empty():a.getSelection().removeAllRanges&&a.getSelection().removeAllRanges():a.document.selection&&a.document.selection.empty()}catch(b){}},K=function(){var a,c,d,e={},f={},h=!1;e.setup=function(){switch(d){case IDRViewer.SELECT_PAN:case IDRViewer.SELECT_SELECT:break;default:d=IDRViewer.SELECT_SELECT}this.currentSelectMode=d,this.currentSelectMode==l.SELECT_SELECT?e.enableTextSelection():e.enablePanning()};var i=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,j="undefined"!=typeof InstallTrigger,k=!!window.chrome&&!i;return f.Default="",j?(f.Grab="-moz-grab",f.Grabbing="-moz-grabbing"):k?(f.Grab="-webkit-grab",f.Grabbing="-webkit-grabbing"):(f.Grab="all-scroll",f.Grabbing="all-scroll"),e.enableTextSelection=function(){this.currentSelectMode=l.SELECT_SELECT,g.style.cursor=f.Default;var a=function(){};g.onmousedown=a,document.onmouseup=a,g.onmousemove=a,g.style.visibility="hidden"},e.enablePanning=function(){this.currentSelectMode=l.SELECT_PAN,J(window),g.style.visibility="visible",g.style.cursor=f.Grab,g.onmousedown=function(b){return b=b||window.event,g.style.cursor=f.Grabbing,a=b.clientX,c=b.clientY,h=!0,!1},document.onmouseup=function(){g.style.cursor=f.Grab,h=!1},g.onmousemove=function(d){if(h)return d=d||window.event,b.scrollLeft=b.scrollLeft+a-d.clientX,b.scrollTop=b.scrollTop+c-d.clientY,a=d.clientX,c=d.clientY,!1}},e.setDefaultMode=function(a){d=a},e}();l.setSelectMode=function(a){if(x){if(d)return;a==l.SELECT_SELECT?K.enableTextSelection():K.enablePanning(),l.fire("selectchange",{type:a})}else K.setDefaultMode(a)};var L,M=function(a,b,c,d,e){var f;return f=e?"translate3d("+b+"px, "+c+"px, 0) scale("+d+")":"translateX("+b+"px) translateY("+c+"px) scale("+d+")",D.getTransform(f)},N=function(a){if(c.toString()!==w){C.stopLoading();var d=m;m=O(a);var e=!1,g=!1;m>=4?(m=4,g=!0):m<=.25&&(m=.25,e=!0);var i=m/d,j=b.scrollTop;c.updateLayout();for(var k=1;k<=o;k++)k!==n&&s[k].unload();L&&h.deleteRule(L);var r=M(null,0,0,m,!1);L=h.insertRule(".page-inner { \n"+r+"\n}",h.cssRules.length);for(var u=0;u<o;u++)t[u+1].style.width=Math.floor(f[u][0]*m)+"px",t[u+1].style.height=Math.floor(f[u][1]*m)+"px";b.scrollTop=j*i,p++,p%2===1&&N(),l.fire("zoomchange",{zoomType:q,zoomValue:m,isMinZoom:e,isMaxZoom:g})}};l.zoomIn=function(){N(1.2*m)},l.zoomOut=function(){N(m/1.2)},l.setZoom=function(a){x?N(a):k=a};var O=function(a){var d=c.getZoomBounds(),e=(b.clientWidth-u)/d.width,f=(b.clientHeight-u)/d.height,g=parseFloat(a);switch(isNaN(g)||(m=g,a=l.ZOOM_SPECIFIC),a||(a=q),a){case l.ZOOM_AUTO:m=c.getAutoZoom(e,f);break;case l.ZOOM_FITWIDTH:m=e;break;case l.ZOOM_FITHEIGHT:m=f;break;case l.ZOOM_FITPAGE:m=Math.min(e,f);break;case l.ZOOM_ACTUALSIZE:m=1}return q=a,m};l.goToPage=function(a,b){x?a>=1&&a<=o&&c.goToPage(Number(a),b):n=a},l.next=function(){c.next()},l.prev=function(){c.prev()},l.setLayout=function(a){x?(c.unload(),Q.removeClass(b,"layout-"+c.toString()),a==l.LAYOUT_PRESENTATION?c=F:a==l.LAYOUT_MAGAZINE?c=G:a==l.LAYOUT_CONTINUOUS&&(c=H),c.setup(n),Q.addClass(b,"layout-"+c.toString()),N(IDRViewer.ZOOM_AUTO),c.goToPage(n),l.fire("layoutchange",{layout:a})):j=a},l.updateLayout=function(){N()};var P=function(a){return document.getElementById(a)};l.on=function(a,b){v[a]||(v[a]=[]),v[a].indexOf(b)===-1&&v[a].push(b)},l.off=function(a,b){if(v[a]){var c=v[a].indexOf(b);c!==-1&&v[a].splice(c,1)}},l.fire=function(a,b){v[a]&&v[a].forEach(function(a){a(b)})};var Q=function(){return{addClass:function(a,b){var c=0!==a.className.length?a.className.split(" "):[],d=c.indexOf(b);d===-1&&(c.push(b),a.className=c.join(" "))},removeClass:function(){for(var a=arguments[0],b=0!==a.className.length?a.className.split(" "):[],c=1;c<arguments.length;c++){var d=b.indexOf(arguments[c]);d!==-1&&b.splice(d,1)}a.className=b.join(" ")}}}();if(window){window.toggleAnnotation=function(a){var b=document.getElementById(a).style;b.visibility="hidden"===b.visibility?"visible":"hidden"};var R;window.Draggable=function(a){function b(a){a=a||window.event,e.isMoving=!0,e.mousePos.x=a.clientX||a.touches[0].pageX,e.mousePos.y=a.clientY||a.touches[0].pageY,e.offsets.left=e.element.parentNode.offsetLeft,e.offsets.top=e.element.parentNode.offsetTop,e.newPos.left=e.offsets.left,e.newPos.top=e.offsets.top,e.element.parentNode.style.zIndex=5,R&&(R.style.zIndex=4)}function c(){e.isMoving=!1,R=e.element.parentNode}function d(a){e.isMoving!==!1&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a=a||window.event,e.newPos.left=(a.clientX||a.touches[0].pageX)-e.mousePos.x+e.offsets.left,e.newPos.top=(a.clientY||a.touches[0].pageY)-e.mousePos.y+e.offsets.top,e.element.parentNode.style.top=e.newPos.top+"px",e.element.parentNode.style.left=e.newPos.left+"px")}this.element=a,this.offsets={},this.mousePos={},this.isMoving=!1,this.newPos={},this.html=document.getElementsByTagName("html").item(0),this.isTouch="ontouchstart"in window;var e=this;if(this.element.onmousemove=null,this.html.addEventListener)if(this.isTouch){this.element.addEventListener("touchstart",b),this.html.addEventListener("touchmove",d),this.html.addEventListener("touchend",c);try{b(event)}catch(f){}}else this.element.addEventListener("mousedown",b),this.html.addEventListener("mousemove",d),this.html.addEventListener("mouseup",c);else this.html.attachEvent&&(this.html.attachEvent("onmousedown",b),this.html.attachEvent("onmousemove",d),this.html.attachEvent("onmouseup",c));a.onclick=function(){e.offsets.left===e.newPos.left&&e.newPos.top===e.offsets.top&&(toggleAnnotation(e.element.parentNode.id),e.isMoving=!1)}}}"function"==typeof define&&define.amd?define(["idrviewer"],[],function(){return l}):"object"==typeof module&&module.exports?module.exports=l:window.IDRViewer=l}();